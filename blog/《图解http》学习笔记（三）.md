## 《图解http》学习笔记（三）
- 持久连接

> 只要任意一端没有明确表示链接中断，则保持TCP连接状态

- 持久连接的好处

> 减少重复的建立和断开TCP连接带来的额外开销，减轻服务端的负载

- 管线化

> 持久连接使得多数请求以管线化方式发送成为可能，管线化技术出现以后，就可以并行发送多个http请求

- 无状态管理的优点

> 由于不必保存状态，自然减少服务器的CPU及内存资源的消耗
 
- cookie

> cookie技术通过在请求和响应报文中写入cookie信息来控制客户端的状态

- cookie原理

> cookie会根据从服务器端发送的响应报文内的一个叫做set-cookie的首部字段，然后通知客户端保存cookie，当下次客户端发送请求时，客户端通过请求报文中的cookie字段携带cookie给服务端

- http报文

> 用于http协议交互的信息称之为http报文

- http报文的结构

> http报文大致分为两个部分，分别为报文首部和报文主体，两者由最初出现的空行(CR+LF)划分

![http报文](http://laihuamin.oss-cn-beijing.aliyuncs.com/http-connent.png)

- 范围请求

> 指定范围发送的请求叫做范围请求，举个例子，对于一份10000字节的资源，你可以只请求5001～10000的那一部分

- Range

> 针对范围请求，我们会采用Range来控制范围请求，举个例子：

```
Range: bytes=5001~10000
```

- 请求范围状态码

> 针对请求范围，响应中会返回206作为状态码。如果服务器无法响应范围请求，则会返回状态码200和完整信息

- 内容协商

> 当浏览器的默认语言为英语或者中文，访问相同的URL的web页面时，则会显示中文版的或者英文版的网页，这样的机制称之为内容协商，客户端和服务端进行内容交涉，给客户端提供最合适的资源，协商的内容有资源的语言、字符集、编码方式等

- 服务器驱动的内容协商

> 由服务器端进行内容协商，以请求的首部字段作为参考，在服务器端自动处理

- 客户端驱动的协商

> 用户在浏览器上显示的内容中进行选择，然后通过js脚本，进行切换

- 透明协商

> 是服务端和客户端的结合体，让两端各自进行协商

